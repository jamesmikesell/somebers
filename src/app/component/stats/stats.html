<div class="stat-container">
  <div class="stat-item">
    <span class="stat-label">
      <span class="label-full">Board Mistakes</span>
      <span class="label-short">Mstks</span>
    </span>
    <span class="stat-value">{{ mistakes }}</span>
  </div>
  <div class="stat-item">
    <span class="stat-label">
      <span class="label-full">Streak</span>
      <span class="label-short">Strk</span>
    </span>
    <div class="streak-value-wrapper">
      @if (showRedOrb) {
        <div class="red-orb"></div>
      }
      @if (isCountingDown || isSlidingUp) {
        <div
          class="stat-value streak-countdown"
          [class.slide-up]="isSlidingUp"
          [class]="streakAnimationClass"
        >
          @for (digit of previousStreakDigits; track $index) {
            <div class="digit-roller">
              <div
                class="digit-roller-inner"
                style="--from-digit: {{ digit }};"
              >
                <span>9</span><span>8</span><span>7</span><span>6</span
                ><span>5</span><span>4</span><span>3</span><span>2</span
                ><span>1</span><span>0</span>
              </div>
            </div>
          }
        </div>
      } @else {
        <span class="stat-value" [class]="streakAnimationClass">
          {{ streak }}
        </span>
      }
      @for (tear of tears; track $index) {
        <div
          class="tear"
          [style.left]="tear.left"
          [style.animation-delay]="tear.animationDelay"
        ></div>
      }
    </div>
  </div>
  @if (displayedStreak) {
    <div
      class="stat-item clickable"
      (click)="cycleBestStreakWindow()"
      title="Change period"
    >
      <span class="stat-label">
        <span class="label-full">
          Best Streak {{ displayedStreak.displayTimelineFull }}
        </span>
        <span class="label-short">
          Best Strk {{ displayedStreak.displayTimelineAbbreviated }}
        </span>
      </span>
      <span class="stat-value">
        <span class="cycle-icon left" aria-hidden="true">‹</span>
        {{ displayedStreak.streak }}
        <span class="cycle-icon right" aria-hidden="true">›</span>
      </span>
    </div>
  }
  <div
    class="stat-item clickable"
    (click)="cycleSecondaryMetric()"
    title="Change metric"
  >
    <span class="stat-label">
      <span class="label-full">
        @if (secondaryDisplayIndex === 0) {
          Last {{ accuracyHistory | number: "1.0-0" }} Moves
        } @else {
          Time Spent
        }
      </span>
      <span class="label-short">
        @if (secondaryDisplayIndex === 0) {
          {{ accuracyHistory | number: "1.0-0" }} Moves
        } @else {
          Time
        }
      </span>
    </span>
    <span class="stat-value">
      <span class="cycle-icon left" aria-hidden="true">‹</span>
      @if (secondaryDisplayIndex === 0) {
        {{ accuracy != null ? (accuracy | number: "1.1-2") + "%" : "—" }}
      } @else {
        {{ currentStats?.timeSpent | duration }}
      }
      <span class="cycle-icon right" aria-hidden="true">›</span>
    </span>
  </div>
</div>
