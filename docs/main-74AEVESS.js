import{a as Oe}from"./chunk-7S535TEK.js";import{a as Te}from"./chunk-YIPIGJ4C.js";import{a as Ie}from"./chunk-GQJTQQUX.js";import{a as me}from"./chunk-SMB3ZBBR.js";import{A as ye,B as _e,I as ke,a as ce,c as le,d as de,e as pe,f as ue,n as ve,q as be,s as Ce,w as Se,x as Me,y as we,z as Ee}from"./chunk-FXPBCG6U.js";import{$a as l,Ab as te,Bb as ie,D as v,Ea as Y,N as M,Na as J,Nb as re,O as x,Q as h,R as G,Ra as Q,T as w,Ta as L,Va as A,Vb as ne,Vc as he,W as K,Wa as D,Wc as ge,X as b,Xc as fe,Y as E,Z,_a as R,aa as y,ab as a,ba as _,bb as X,c as U,da as $,f,gb as P,ha as z,hc as oe,ib as T,ic as se,jc as ae,kb as V,o as m,ua as g,ub as ee,v as q,x as u,y as j,ya as k,zb as c}from"./chunk-DUPXJZ6A.js";import{a as H}from"./chunk-AH3KB6OD.js";var B="Service workers are disabled or not supported by this browser",C=class{serviceWorker;worker;registration;events;constructor(t,r){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new U(n=>n.error(new h(5601,!1)));else{let n=null,i=new f;this.worker=new U(d=>(n!==null&&d.next(n),i.subscribe(I=>d.next(I))));let o=()=>{let{controller:d}=t;d!==null&&(n=d,i.next(n))};t.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(M(()=>t.getRegistration().then(d=>{if(!d)throw new h(5601,!1);return d})));let s=new f;this.events=s.asObservable();let p=d=>{let{data:I}=d;I?.type&&s.next(I)};t.addEventListener("message",p),r?.get(L,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",o),t.removeEventListener("message",p)})}}postMessage(t,r){return new Promise(n=>{this.worker.pipe(v(1)).subscribe(i=>{i.postMessage(H({action:t},r)),n()})})}postMessageWithOperation(t,r,n){let i=this.waitForOperationCompleted(n),o=this.postMessage(t,r);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let r;return typeof t=="string"?r=n=>n.type===t:r=n=>t.includes(n.type),this.events.pipe(j(r))}nextEventOfType(t){return this.eventsOfType(t).pipe(v(1))}waitForOperationCompleted(t){return new Promise((r,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(j(i=>i.nonce===t),v(1),m(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:r,error:n})})}get isEnabled(){return!!this.serviceWorker}},Ve=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new f;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=u,this.notificationClicks=u,this.notificationCloses=u,this.pushSubscriptionChanges=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(m(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(m(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(m(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(m(i=>i.data)),this.pushManager=this.sw.registration.pipe(m(i=>i.pushManager));let n=this.pushManager.pipe(M(i=>i.getSubscription()));this.subscription=new U(i=>{let o=n.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(B));let n={userVisibleOnly:!0},i=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return n.applicationServerKey=o,new Promise((s,p)=>{this.pushManager.pipe(M(S=>S.subscribe(n)),v(1)).subscribe({next:S=>{this.subscriptionChanges.next(S),s(S)},error:p})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(B));let r=n=>{if(n===null)throw new h(5602,!1);return n.unsubscribe().then(i=>{if(!i)throw new h(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,i)=>{this.subscription.pipe(v(1),M(r)).subscribe({next:n,error:i})})}decodeBase64(r){return atob(r)}static \u0275fac=function(n){return new(n||e)(b(C))};static \u0275prov=w({token:e,factory:e.\u0275fac})}return e})(),W=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(B));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let r=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new h(5601,!1));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}static \u0275fac=function(n){return new(n||e)(b(C))};static \u0275prov=w({token:e,factory:e.\u0275fac})}return e})();var Ae=new K("");function Ne(){let e=E(O);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=E(Ae),r=E(J),n=E(L);r.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),n.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),r.runOutsideAngular(()=>{let i,{registrationStrategy:o}=e;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...p]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Ue(+p[0]||0);break;case"registerWhenStable":i=Promise.race([n.whenStable(),Ue(+p[0])]);break;default:throw new h(5600,!1)}}i.then(()=>{n.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(G(5604,!1)))})})}function Ue(e){return new Promise(t=>setTimeout(t,e))}function Fe(e,t){return new C(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var O=class{enabled;updateViaCache;type;scope;registrationStrategy};function De(e,t={}){return Z([Ve,W,{provide:Ae,useValue:e},{provide:O,useValue:t},{provide:C,useFactory:Fe,deps:[O,$]},Q(Ne)])}var Re=[{path:"",loadComponent:()=>import("./chunk-2WT7OSN3.js").then(e=>e.Board)},{path:"documentation",loadComponent:()=>import("./chunk-N3PEWRD2.js").then(e=>e.Documentation)},{path:"settings",loadComponent:()=>import("./chunk-RREK4QFW.js").then(e=>e.SettingsComponent)},{path:"backup",loadComponent:()=>import("./chunk-DHWWZ6OQ.js").then(e=>e.BackupComponent)},{path:"resume",loadComponent:()=>import("./chunk-FBTX6RGG.js").then(e=>e.ResumeComponent)},{path:"**",loadComponent:()=>import("./chunk-2WT7OSN3.js").then(e=>e.Board)}];var Pe={providers:[ae(),z(),re({eventCoalescing:!0}),de(Re,ue(),pe({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"})),De("ngsw-worker.js",{enabled:!ne(),registrationStrategy:"registerWhenStable:30000"})]};var N=class e{constructor(t,r){this.http=t;this.swUpdate=r}isUpdateAvailable=!1;startVersionCheck(){q(1*1e3,600*1e3).subscribe(()=>{this.http.get("./version.json?t="+new Date().getTime()).subscribe(t=>{t.version!==me.VERSION&&(this.swUpdate.isEnabled?this.swUpdate.checkForUpdate().then(()=>{this.isUpdateAvailable=!0}):this.isUpdateAvailable=!0)})})}refreshApp(){this.swUpdate.isEnabled?this.swUpdate.checkForUpdate().then(()=>{document.location.reload()}):document.location.reload()}static \u0275fac=function(r){return new(r||e)(b(se),b(W))};static \u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})};function Be(e,t){if(e&1){let r=P();l(0,"button",6),T("click",function(){y(r);let i=V(2);return _(i.requestStartOver())}),l(1,"mat-icon"),c(2,"restart_alt"),a(),c(3," Start Board Over "),a()}}function We(e,t){if(e&1){let r=P();l(0,"button",9),T("click",function(){y(r);let i=V();return _(i.boardUiService.requestUndo())}),l(1,"mat-icon"),c(2,"undo"),a(),c(3," Undo "),a(),A(4,Be,4,0,"button",10)}if(e&2){let r=V();R("disabled",!r.canUndo),g(4),D(r.showStartOver?4:-1)}}function He(e,t){e&1&&c(0," Refresh (Update Available) ")}function qe(e,t){e&1&&c(0," Refresh ")}var F=class e{constructor(t,r,n,i){this.versionCheckService=t;this.boardUiService=r;this.settingsService=i;t.startVersionCheck();let o=this.settingsService.getColorMode(),s=this.colorModes.findIndex(p=>p.mode===o);s>-1&&(this.currentColorModeIndex=s),this.setColorMode()}colorModes=[{mode:"auto",cssScheme:"light dark",label:"Theme (Auto)",icon:"brightness_auto"},{mode:"light",cssScheme:"light",label:"Theme (Light)",icon:"light_mode"},{mode:"dark",cssScheme:"dark",label:"Theme (Dark)",icon:"dark_mode"}];currentColorModeIndex=0;get currentColorMode(){return this.colorModes[this.currentColorModeIndex]}boardVisible=!1;canUndo=!1;showStartOver=!1;destroy=new f;ngOnInit(){this.boardUiService.boardVisible$.pipe(x(this.destroy)).subscribe(t=>setTimeout(()=>this.boardVisible=t,0)),this.boardUiService.canUndo$.pipe(x(this.destroy)).subscribe(t=>setTimeout(()=>this.canUndo=t,0)),this.boardUiService.showStartOver$.pipe(x(this.destroy)).subscribe(t=>setTimeout(()=>this.showStartOver=t,0))}ngOnDestroy(){this.destroy.next()}toggleColorMode(){this.currentColorModeIndex=(this.currentColorModeIndex+1)%this.colorModes.length,this.setColorMode(),this.settingsService.setColorMode(this.currentColorMode.mode)}getOrCreateThemeColorMeta(){let t=document.querySelector('meta[name="theme-color"]');return t||(t=document.createElement("meta"),t.name="theme-color",document.head.appendChild(t)),t}setColorMode(){document.body.style.colorScheme=this.currentColorMode.cssScheme;let t=window.getComputedStyle(document.body);t.backgroundColor;let r=this.getOrCreateThemeColorMeta();r.content=t.backgroundColor}requestStartOver(){this.boardUiService.requestRestart()}static \u0275fac=function(r){return new(r||e)(k(N),k(Oe),k(Ie),k(Te))};static \u0275cmp=Y({type:e,selectors:[["app-root"]],decls:34,vars:7,consts:[["menu","matMenu"],["matBadge","1",1,"menu-trigger",3,"matMenuTriggerFor","matBadgeHidden"],["mat-menu-item","","routerLink","/"],["mat-menu-item","","routerLink","/documentation"],["mat-menu-item","","routerLink","/settings"],["mat-menu-item","","routerLink","/backup"],["mat-menu-item","",3,"click"],["matBadgePosition","before","matBadge","!","aria-hidden","false","aria-label","Notification",3,"matBadgeHidden"],[1,"page"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item",""]],template:function(r,n){if(r&1){let i=P();l(0,"div",1)(1,"mat-icon"),c(2,"more_vert"),a()(),l(3,"mat-menu",null,0)(5,"button",2)(6,"mat-icon"),c(7,"grid_on"),a(),c(8," Game "),a(),A(9,We,5,2),l(10,"button",3)(11,"mat-icon"),c(12,"book"),a(),c(13," How To Play "),a(),l(14,"button",4)(15,"mat-icon"),c(16,"settings"),a(),c(17," Settings "),a(),l(18,"button",5)(19,"mat-icon"),c(20,"backup"),a(),c(21," Backup & Restore "),a(),l(22,"button",6),T("click",function(){return y(i),_(n.toggleColorMode())}),l(23,"mat-icon"),c(24),a(),c(25),a(),l(26,"button",6),T("click",function(){return y(i),_(n.versionCheckService.refreshApp())}),l(27,"mat-icon",7),c(28,"refresh"),a(),l(29,"span"),A(30,He,1,0)(31,qe,1,0),a()()(),l(32,"div",8),X(33,"router-outlet"),a()}if(r&2){let i=ee(4);R("matMenuTriggerFor",i)("matBadgeHidden",!n.versionCheckService.isUpdateAvailable),g(9),D(n.boardVisible?9:-1),g(15),te(n.currentColorMode.icon),g(),ie(" ",n.currentColorMode.label," "),g(2),R("matBadgeHidden",!n.versionCheckService.isUpdateAvailable),g(3),D(n.versionCheckService.isUpdateAvailable?30:31)}},dependencies:[ce,ve,be,Ce,fe,ge,he,Ee,Me,Se,we,_e,ye,ke,le],styles:[".page[_ngcontent-%COMP%]{display:flex;justify-content:center}.menu-trigger[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-block;position:absolute;top:10px;left:0}.menu-trigger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:33px;width:62px;height:62px;text-align:center;align-content:center}"]})};oe(F,Pe).catch(e=>console.error(e));
